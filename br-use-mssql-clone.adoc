---
sidebar: sidebar 
permalink: br-use-mssql-clone.html 
keywords: backing up, restoring, back up, backup, clone, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery 
summary: Clonez les données des applications Microsoft SQL Server à des fins de développement, de test ou de protection. 
---
= Cloner les charges de travail Microsoft SQL Server à l'aide de NetApp Backup and Recovery
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Clonez les données d’application Microsoft SQL Server sur une machine virtuelle à des fins de développement, de test ou de protection avec NetApp Backup and Recovery.  Créez des clones à partir d’instantanés instantanés ou existants de vos charges de travail SQL Server.

Choisissez entre les types de clones suivants :

* * Instantané instantané et clone * : vous pouvez créer un clone de vos charges de travail Microsoft SQL Server à partir d'un instantané instantané, qui est une copie ponctuelle des données sources créées à partir d'une sauvegarde. Le clone est stocké dans un magasin d’objets dans votre compte cloud public ou privé. Vous pouvez utiliser le clone pour restaurer vos charges de travail en cas de perte ou de corruption de données.
* *Cloner à partir d'un snapshot existant* : vous pouvez choisir un snapshot existant dans une liste de snapshots disponibles pour la charge de travail.  Cette option est utile si vous souhaitez créer un clone à partir d’un moment précis.  Cloner vers un stockage principal ou secondaire.


Vous pouvez atteindre les objectifs de protection suivants :

* Créer un clone
* Rafraîchir un clone
* Diviser un clone
* Supprimer un clone


*Rôle de NetApp Console requis* Visualiseur de stockage, super administrateur de sauvegarde et de récupération ou rôle d'administrateur de sauvegarde de sauvegarde et de récupération. https://docs.netapp.com/us-en/console-setup-admin/reference-iam-predefined-roles.html["En savoir plus sur les rôles d'accès à la NetApp Console pour tous les services"^] .



== Créer un clone

Vous pouvez créer un clone de vos charges de travail Microsoft SQL Server.  Un clone est une copie des données sources créée à partir d'une sauvegarde.  Le clone est stocké dans un magasin d’objets dans votre compte cloud public ou privé.  Vous pouvez utiliser le clone pour restaurer vos charges de travail en cas de perte ou de corruption de données.

Vous pouvez créer un clone à partir d’un instantané existant ou d’un instantané instantané.  Un instantané est une copie ponctuelle des données sources créée à partir d'une sauvegarde.  Vous pouvez utiliser le clone pour restaurer vos charges de travail en cas de perte ou de corruption de données.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Cloner*.
. Sélectionnez *Créer un nouveau clone*.
. Sélectionnez le type de clone :
+
** *Clonage et actualisation de la base de données à partir d'un instantané existant* : Choisissez un instantané et configurez les options de clonage.
** *Instantané et clonage instantanés* : Prenez maintenant un instantané des données sources et créez un clone à partir de cet instantané.  Cette option est utile si vous souhaitez créer un clone à partir des données les plus récentes de la charge de travail source.


. Complétez la section *Source de la base de données* :
+
** *Clone unique ou clone en masse* : sélectionnez si vous souhaitez créer un clone unique ou plusieurs clones.  Si vous sélectionnez *Clonage en masse*, vous pouvez créer plusieurs clones à la fois en utilisant un groupe de protection que vous avez déjà créé.  Cette option est utile si vous souhaitez créer plusieurs clones pour différentes charges de travail.
** *Hôte, instance et nom de la base de données source* : sélectionnez l'hôte, l'instance et le nom de la base de données source pour le clone.  La base de données source est la base de données à partir de laquelle le clone sera créé.


. Complétez la section *Cible de la base de données* :
+
** *Hôte, instance et nom de la base de données cible* : sélectionnez l'hôte, l'instance et le nom de la base de données cible pour le clone.  La base de données cible est l’emplacement où le clone sera créé.
+
Vous pouvez également sélectionner *Suffixe* dans la liste déroulante du nom cible et ajouter un suffixe au nom de la base de données clonée.  Si vous n'ajoutez pas de suffixe, le nom de la base de données clonée est le même que le nom de la base de données source.

** *QoS (débit maximal)* : sélectionnez le débit maximal de qualité de service (QoS) en Mbit/s pour le clone.  La QoS définit les caractéristiques de performances du clone, telles que le débit maximal et les IOPS.


. Complétez la section *Monture* :
+
** *Point de montage à attribution automatique* : attribuez automatiquement un point de montage pour le clone dans le magasin d'objets.
** *Définir le chemin du point de montage* : saisissez un point de montage pour le clone.  Le point de montage est l’emplacement où le clone sera monté dans le magasin d’objets.  Sélectionnez la lettre du lecteur, entrez le chemin du fichier de données et entrez le chemin du fichier journal.


. Sélectionnez *Suivant*.
. Sélectionnez le point de restauration :
+
** *Instantanés existants* : sélectionnez un instantané existant dans la liste des instantanés disponibles pour la charge de travail.  Cette option est utile si vous souhaitez créer un clone à partir d’un moment précis.
** * Instantané instantané et clonage * : sélectionnez le dernier instantané dans la liste des instantanés disponibles pour la charge de travail.  Cette option est utile si vous souhaitez créer un clone à partir des données les plus récentes de la charge de travail source.


. Si vous choisissez de créer un *instantané instantané et de cloner*, choisissez l'emplacement de stockage du clone :
+
** *Stockage local* : sélectionnez cette option pour créer le clone dans le stockage local du système ONTAP .  Le stockage local est le stockage directement connecté au système ONTAP .
** *Stockage secondaire* : sélectionnez cette option pour créer le clone dans le stockage secondaire du système ONTAP .  Le stockage secondaire est le stockage utilisé pour les charges de travail de sauvegarde et de récupération.


. Sélectionnez l’emplacement de destination des données et des journaux.
. Sélectionnez *Suivant*.
. Complétez la section *Options avancées*.
. Si vous avez choisi *Instantané et clonage instantanés*, complétez les options suivantes :
+
** *Programme d'actualisation et expiration du clonage* : Si vous avez choisi *Clonage instantané*, saisissez la date à laquelle commencer l'actualisation du clone.  Le calendrier de clonage définit quand le clone sera créé.
+
*** *Supprimer le clone si la planification expire* : si vous souhaitez supprimer le clone à la date d'expiration du clone.
*** *Actualiser le clone toutes les* : sélectionnez la fréquence à laquelle le clone doit être actualisé.  Vous pouvez choisir d'actualiser le clone toutes les heures, tous les jours, toutes les semaines, tous les mois ou tous les trimestres.  Cette option est utile si vous souhaitez maintenir le clone à jour avec la charge de travail source.


** *Prescripts et postscripts* : Ajoutez éventuellement des scripts à exécuter avant et après la création du clone.  Ces scripts peuvent effectuer des tâches supplémentaires, telles que la configuration du clone ou l'envoi de notifications.
** *Notification* : Vous pouvez également spécifier des adresses e-mail pour recevoir des notifications sur l'état de création du clone ainsi que le rapport de tâche.  Vous pouvez également spécifier une URL de webhook pour recevoir des notifications sur l'état de création du clone.  Vous pouvez spécifier si vous souhaitez des notifications de réussite et d'échec ou seulement l'une ou l'autre.
** *Tags* : Sélectionnez des étiquettes pour vous aider à rechercher des groupes de ressources ultérieurement et sélectionnez *Appliquer*.  Par exemple, si vous ajoutez « RH » comme balise à plusieurs groupes de ressources, vous pourrez ultérieurement trouver tous les groupes de ressources associés à la balise « RH ».


. Sélectionnez *Créer*.
. Une fois le clone créé, vous pouvez le visualiser dans la page *Inventaire*.




== Rafraîchir un clone

Vous pouvez actualiser un clone de vos charges de travail Microsoft SQL Server.  L'actualisation d'un clone met à jour le clone avec les dernières données de la charge de travail source.  Ceci est utile si vous souhaitez maintenir le clone à jour avec la charge de travail source.

Vous avez la possibilité de modifier le nom de la base de données, d'utiliser le dernier instantané ou d'actualiser à partir d'un instantané de production existant.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Cloner*.
. Sélectionnez le clone que vous souhaitez actualiser.
. Sélectionnez l'icône Actionsimage:../media/icon-action.png["Option Actions"] > *Actualiser le clone*.
. Complétez la section *Paramètres avancés* :
+
** *Étendue de la récupération* : choisissez de récupérer toutes les sauvegardes de journaux ou les sauvegardes de journaux jusqu'à un moment précis.  Cette option est utile si vous souhaitez récupérer le clone à un moment précis.
** *Programme d'actualisation et expiration du clonage* : Si vous avez choisi *Clonage instantané*, saisissez la date à laquelle commencer l'actualisation du clone.  Le calendrier de clonage définit quand le clone sera créé.
+
*** *Supprimer le clone si la planification expire* : si vous souhaitez supprimer le clone à la date d'expiration du clone.
*** *Actualiser le clone toutes les* : sélectionnez la fréquence à laquelle le clone doit être actualisé.  Vous pouvez choisir d'actualiser le clone toutes les heures, tous les jours, toutes les semaines, tous les mois ou tous les trimestres.  Cette option est utile si vous souhaitez maintenir le clone à jour avec la charge de travail source.


** *Paramètres iGroup* : sélectionnez l'iGroup pour le clone. L'iGroup est un regroupement logique d'initiateurs utilisés pour accéder au clone. Vous pouvez sélectionner un iGroup existant ou en créer un nouveau. Sélectionnez l’iGroup à partir du système de stockage ONTAP principal ou secondaire.
** *Prescripts et postscripts* : Ajoutez éventuellement des scripts à exécuter avant et après la création du clone.  Ces scripts peuvent effectuer des tâches supplémentaires, telles que la configuration du clone ou l'envoi de notifications.
** *Notification* : Vous pouvez également spécifier des adresses e-mail pour recevoir des notifications sur l'état de création du clone ainsi que le rapport de tâche.  Vous pouvez également spécifier une URL de webhook pour recevoir des notifications sur l'état de création du clone.  Vous pouvez spécifier si vous souhaitez des notifications de réussite et d'échec ou seulement l'une ou l'autre.
** *Tags*: Saisissez une ou plusieurs étiquettes qui vous aideront à rechercher ultérieurement le groupe de ressources.  Par exemple, si vous ajoutez « RH » comme balise à plusieurs groupes de ressources, vous pouvez ultérieurement trouver tous les groupes de ressources associés à la balise RH.


. Dans la boîte de dialogue de confirmation d'actualisation, pour continuer, sélectionnez *Actualiser*.




== Ignorer une actualisation du clone

Ignorez une actualisation du clone pour conserver le clone inchangé.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Cloner*.
. Sélectionnez le clone pour lequel vous souhaitez ignorer l’actualisation.
. Sélectionnez l'icône Actionsimage:../media/icon-action.png["Option Actions"] > *Ignorer l'actualisation*.
. Dans la boîte de dialogue de confirmation d’actualisation, procédez comme suit :
+
.. Pour ignorer uniquement le prochain programme d'actualisation, sélectionnez *Ignorer uniquement le prochain programme d'actualisation*.
.. Pour continuer, sélectionnez *Ignorer*.






== Diviser un clone

Vous pouvez diviser un clone de vos charges de travail Microsoft SQL Server.  La division d’un clone crée une nouvelle sauvegarde à partir du clone.  La nouvelle sauvegarde peut être utilisée pour restaurer les charges de travail.

Vous pouvez choisir de diviser un clone en clones indépendants ou à long terme.  Un assistant affiche la liste des agrégats qui font partie du SVM, leurs tailles et l'emplacement où réside le volume cloné.  NetApp Backup and Recovery indique également s'il y a suffisamment d'espace pour diviser le clone.  Une fois le clone divisé, le clone devient une base de données indépendante pour la protection.

Le travail de clonage ne doit pas être supprimé et peut être réutilisé pour d'autres clones.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Cloner*.
. Sélectionnez un clone.
. Sélectionnez l'icône Actionsimage:../media/icon-action.png["Option Actions"] > *Clone divisé*.
. Vérifiez les détails du clone divisé et sélectionnez *Diviser*.
. Une fois le clone divisé créé, vous pouvez le visualiser dans la page *Inventaire*.




== Supprimer un clone

Vous pouvez supprimer un clone de vos charges de travail Microsoft SQL Server.  La suppression d’un clone supprime le clone du magasin d’objets et libère de l’espace de stockage.

Si une politique protège le clone, le clone et son travail sont supprimés.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Cloner*.
. Sélectionnez un clone.
. Sélectionnez l'icône Actionsimage:../media/icon-action.png["Option Actions"] > *Supprimer le clone*.
. Dans la boîte de dialogue de confirmation de suppression du clone, vérifiez les détails de la suppression.
+
.. Pour supprimer les ressources clonées de SnapCenter même si les clones ou leur stockage ne sont pas accessibles, sélectionnez *Forcer la suppression*.
.. Sélectionnez *Supprimer*.


. Lorsque le clone est supprimé, il est supprimé de la page *Inventaire*.

