---
sidebar: sidebar 
permalink: br-use-mssql-restore.html 
keywords: backing up, restoring, back up, backup, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery 
summary: 'Restaurez les charges de travail de la base de données à partir d"une copie instantanée, d"une sauvegarde de charge de travail répliquée sur un stockage secondaire ou à partir de sauvegardes stockées dans le stockage d"objets.' 
---
= Restaurez les charges de travail Microsoft SQL Server avec NetApp Backup and Recovery
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Restaurez les charges de travail Microsoft SQL Server à l’aide de NetApp Backup and Recovery.  Utilisez des copies instantanées, des sauvegardes répliquées sur un stockage secondaire ou des sauvegardes dans un stockage d’objets.  Restaurez les charges de travail sur le système d’origine, un système différent avec le même compte cloud ou un système ONTAP sur site.

.Restaurer à partir de ces emplacements
Vous pouvez restaurer des charges de travail à partir de différents emplacements de départ :

* Restaurer à partir d'un emplacement principal
* Restaurer à partir d'une ressource répliquée
* Restaurer à partir d'une sauvegarde de magasin d'objets


.Restaurer ces points
Vous pouvez restaurer les données vers le dernier instantané ou vers ces points :

* Restaurer à partir d'instantanés
* Restaurez à un moment précis si vous connaissez le nom du fichier, l'emplacement et la dernière date valide
* Restaurer la dernière sauvegarde


.Considérations relatives à la restauration à partir du stockage d'objets
Si vous sélectionnez un fichier de sauvegarde dans le stockage d'objets et que Ransomware Resilience est actif pour cette sauvegarde (si vous avez activé DataLock et Ransomware Resilience dans la stratégie de sauvegarde), vous êtes invité à exécuter une vérification d'intégrité supplémentaire sur le fichier de sauvegarde avant de restaurer les données.  Nous vous recommandons d'effectuer l'analyse.


TIP: Vous payez des frais supplémentaires à votre fournisseur de cloud pour accéder au fichier de sauvegarde.



== Comment fonctionne la restauration des charges de travail

Lorsque vous restaurez des charges de travail, les événements suivants se produisent :

* Lorsque vous restaurez une charge de travail à partir d'un fichier de sauvegarde, NetApp Backup and Recovery crée une _nouvelle_ ressource à l'aide des données de la sauvegarde.
* Lorsque vous effectuez une restauration à partir d’une charge de travail répliquée, vous pouvez restaurer la charge de travail sur le système d’origine ou sur un système ONTAP local.
+
image:diagram_browse_restore_volume-unified.png["Un diagramme qui montre le flux pour restaurer une ressource"]

* Lorsque vous restaurez une sauvegarde à partir du stockage d’objets, vous pouvez restaurer les données sur le système d’origine ou sur un système ONTAP local.




== Méthodes de restauration

Restaurez les charges de travail à l’aide de l’une de ces méthodes :

* *Depuis la page Restaurer* : utilisez cette option pour restaurer une ressource lorsque vous ne connaissez pas son nom, son emplacement ou sa dernière date de validité.  Recherchez l'instantané à l'aide de filtres.
* *Depuis la page Inventaire* : utilisez cette option pour restaurer une ressource spécifique lorsque vous connaissez son nom, son emplacement et sa dernière date de disponibilité.  Parcourez la liste pour trouver la ressource.


*Rôle de NetApp Console requis* Visualiseur de stockage, super administrateur de sauvegarde et de récupération ou rôle d'administrateur de sauvegarde de sauvegarde et de récupération. https://docs.netapp.com/us-en/console-setup-admin/reference-iam-predefined-roles.html["En savoir plus sur les rôles d'accès à la NetApp Console pour tous les services"^] .



== Restaurer les données de charge de travail à partir de l'option Restaurer

Restaurez les charges de travail de la base de données à l’aide de l’option Restaurer.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Restaurer*.
. Sélectionnez la base de données que vous souhaitez restaurer.  Utilisez les filtres pour rechercher.
. Sélectionnez l'option de restauration :
+
** Restaurer à partir d'instantanés
** Restaurez à un moment précis si vous connaissez le nom du fichier, l'emplacement et la dernière date valide
** Restaurer la dernière sauvegarde






=== Restaurer les charges de travail à partir de snapshots

. En continuant à partir de la page Options de restauration, sélectionnez *Restaurer à partir d'instantanés*.
+
Une liste d’instantanés apparaît.

. Sélectionnez l’instantané que vous souhaitez restaurer.
. Sélectionnez *Suivant*.
+
Vous verrez ensuite les options de destination.

. Dans la page Détails de la destination, saisissez les informations suivantes :
+
** *Paramètres de destination* : choisissez si vous souhaitez restaurer les données à leur emplacement d'origine ou à un autre emplacement.  Pour un autre emplacement, sélectionnez le nom de l’hôte et l’instance, entrez le nom de la base de données et entrez le chemin de destination où vous souhaitez restaurer l’instantané.
** *Options de pré-restauration*:
+
*** *Écraser la base de données avec le même nom lors de la restauration* : Lors de la restauration, le nom de la base de données d'origine est conservé.
*** *Conserver les paramètres de réplication de la base de données SQL* : conserve les paramètres de réplication de la base de données SQL après l'opération de restauration.
*** *Créer une sauvegarde du journal des transactions avant la restauration* : Crée une sauvegarde du journal des transactions avant l'opération de restauration.***  *Quitter la restauration si la sauvegarde du journal des transactions avant la restauration échoue* : arrête l'opération de restauration si la sauvegarde du journal des transactions échoue.
*** *Prescript* : saisissez le chemin complet d'un script qui doit être exécuté avant l'opération de restauration, tous les arguments utilisés par le script et le temps d'attente pour que le script se termine.


** *Options post-restauration*:
+
*** *Opérationnel*, mais indisponible pour restaurer des journaux de transactions supplémentaires.  Cela remet la base de données en ligne après l'application des sauvegardes du journal des transactions.
*** *Non opérationnel*, mais disponible pour restaurer des journaux de transactions supplémentaires.  Maintient la base de données dans un état non opérationnel après l'opération de restauration lors de la restauration des sauvegardes du journal des transactions.  Cette option est utile pour restaurer des journaux de transactions supplémentaires.
*** *Mode lecture seule* et disponible pour restaurer des journaux de transactions supplémentaires.  Restaure la base de données en mode lecture seule et applique les sauvegardes du journal des transactions.
*** *Postscript* : Saisissez le chemin complet d'un script qui doit être exécuté après l'opération de restauration et tous les arguments que le script prend.




. Sélectionnez *Restaurer*.




=== Restaurer à un moment précis

NetApp Backup and Recovery utilise les journaux et les instantanés les plus récents pour créer une restauration ponctuelle de vos données.

. En continuant à partir de la page Options de restauration, sélectionnez *Restaurer à un moment précis*.
. Sélectionnez *Suivant*.
. Dans la page Restaurer à un moment précis, saisissez les informations suivantes :
+
** *Date et heure de restauration des données* : saisissez la date et l'heure exactes des données que vous souhaitez restaurer.  Cette date et cette heure proviennent de l'hôte de la base de données Microsoft SQL Server.


. Sélectionnez *Rechercher*.
. Sélectionnez l’instantané que vous souhaitez restaurer.
. Sélectionnez *Suivant*.
. Dans la page Détails de la destination, saisissez les informations suivantes :
+
** *Paramètres de destination* : Choisissez si vous souhaitez restaurer les données à leur emplacement d'origine ou à un autre emplacement.  Pour un autre emplacement, sélectionnez le nom de l’hôte et l’instance, entrez le nom de la base de données et entrez le chemin de destination.
** *Options de pré-restauration*:
+
*** *Conserver le nom de la base de données d'origine* : lors de la restauration, le nom de la base de données d'origine est conservé.
*** *Conserver les paramètres de réplication de la base de données SQL* : conserve les paramètres de réplication de la base de données SQL après l'opération de restauration.
*** *Prescript* : saisissez le chemin complet d'un script qui doit être exécuté avant l'opération de restauration, tous les arguments utilisés par le script et le temps d'attente pour que le script se termine.


** *Options post-restauration*:
+
*** *Opérationnel*, mais indisponible pour restaurer des journaux de transactions supplémentaires.  Cela remet la base de données en ligne après l'application des sauvegardes du journal des transactions.
*** *Non opérationnel*, mais disponible pour restaurer des journaux de transactions supplémentaires.  Maintient la base de données dans un état non opérationnel après l'opération de restauration lors de la restauration des sauvegardes du journal des transactions.  Cette option est utile pour restaurer des journaux de transactions supplémentaires.
*** *Mode lecture seule* et disponible pour restaurer des journaux de transactions supplémentaires.  Restaure la base de données en mode lecture seule et applique les sauvegardes du journal des transactions.
*** *Postscript* : Saisissez le chemin complet d'un script qui doit être exécuté après l'opération de restauration et tous les arguments que le script prend.




. Sélectionnez *Restaurer*.




=== Restaurer la dernière sauvegarde

Cette option utilise les dernières sauvegardes complètes et journaux pour restaurer vos données au dernier état correct.  Le système analyse les journaux depuis le dernier instantané jusqu'à présent.  Le processus suit les modifications et les activités pour restaurer la version la plus récente et la plus précise de vos données.

. En continuant à partir de la page Options de restauration, sélectionnez *Restaurer vers la dernière sauvegarde*.
+
NetApp Backup and Recovery vous montre les snapshots disponibles pour l'opération de restauration.

. Dans la page Restaurer vers l’état le plus récent, sélectionnez l’emplacement de l’instantané du stockage local, secondaire ou d’objets.
. Sélectionnez *Suivant*.
. Dans la page Détails de la destination, saisissez les informations suivantes :
+
** *Paramètres de destination* : Choisissez si vous souhaitez restaurer les données à leur emplacement d'origine ou à un autre emplacement.  Pour un autre emplacement, sélectionnez le nom de l’hôte et l’instance, entrez le nom de la base de données et entrez le chemin de destination.
** *Options de pré-restauration*:
+
*** *Écraser la base de données avec le même nom lors de la restauration* : Lors de la restauration, le nom de la base de données d'origine est conservé.
*** *Conserver les paramètres de réplication de la base de données SQL* : conserve les paramètres de réplication de la base de données SQL après l'opération de restauration.
*** *Créer une sauvegarde du journal des transactions avant la restauration* : Crée une sauvegarde du journal des transactions avant l'opération de restauration.
*** *Quitter la restauration si la sauvegarde du journal des transactions avant la restauration échoue* : arrête l'opération de restauration si la sauvegarde du journal des transactions échoue.
*** *Prescript* : saisissez le chemin complet d'un script qui doit être exécuté avant l'opération de restauration, tous les arguments utilisés par le script et le temps d'attente pour que le script se termine.


** *Options post-restauration*:
+
*** *Opérationnel*, mais indisponible pour restaurer des journaux de transactions supplémentaires.  Cela remet la base de données en ligne après l'application des sauvegardes du journal des transactions.
*** *Non opérationnel*, mais disponible pour restaurer des journaux de transactions supplémentaires.  Maintient la base de données dans un état non opérationnel après l'opération de restauration lors de la restauration des sauvegardes du journal des transactions.  Cette option est utile pour restaurer des journaux de transactions supplémentaires.
*** *Mode lecture seule* et disponible pour restaurer des journaux de transactions supplémentaires.  Restaure la base de données en mode lecture seule et applique les sauvegardes du journal des transactions.
*** *Postscript* : Saisissez le chemin complet d'un script qui doit être exécuté après l'opération de restauration et tous les arguments que le script prend.




. Sélectionnez *Restaurer*.




== Restaurer les données de charge de travail à partir de l'option Inventaire

Restaurer les charges de travail de la base de données à partir de la page Inventaire.  En utilisant l’option Inventaire, vous pouvez restaurer uniquement les bases de données, pas les instances.

.Étapes
. Dans le menu NetApp Backup and Recovery , sélectionnez *Inventaire*.
. Choisissez l’hôte sur lequel se trouve la ressource que vous souhaitez restaurer.
. Sélectionnez les *Actions*image:icon-action.png["Icône Actions"] icône et sélectionnez *Afficher les détails*.
. Sur la page Microsoft SQL Server, sélectionnez l’onglet *Bases de données*.
. Dans le menu Bases de données, sélectionnez une base de données avec le statut « Protégé ».
. Sélectionnez les *Actions*image:icon-action.png["Icône Actions"] icône et sélectionnez *Restaurer*.
+
Les trois mêmes options s'affichent lorsque vous restaurez à partir de la page Restaurer :

+
** Restaurer à partir d'instantanés
** Restaurer à un moment précis dans le temps
** Restaurer la dernière sauvegarde


. Continuez avec les mêmes étapes pour l'option de restauration à partir de la page Restaurer


ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]

ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]
